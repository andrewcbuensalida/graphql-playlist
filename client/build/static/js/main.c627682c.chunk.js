(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(t,e,n){},57:function(t,e,n){"use strict";n.r(e);var a,c,r,i,o,s=n(3),d=n(40),j=(n(53),n(67)),l=n(65),b=n(64),u=n(33),O=n.n(u),h=n(41),x=n(17),m=n(69),v=n(68),k=n(21),p=n(66),f=Object(p.a)(a||(a=Object(k.a)(["\n\t{\n\t\tauthors {\n\t\t\tname\n\t\t\tid\n\t\t}\n\t}\n"]))),g=Object(p.a)(c||(c=Object(k.a)(["\n\t{\n\t\tbooks {\n\t\t\tname\n\t\t\tid\n\t\t}\n\t}\n"]))),B=Object(p.a)(r||(r=Object(k.a)(["\n\tmutation AddBook($name: String!, $genre: String!, $authorId: ID!) {\n\t\taddBook(name: $name, genre: $genre, authorId: $authorId) {\n\t\t\tname\n\t\t\tid\n\t\t}\n\t}\n"]))),y=Object(p.a)(i||(i=Object(k.a)(["\n\tquery GetBook($id: ID) {\n\t\tbook(id: $id) {\n\t\t\tid\n\t\t\tname\n\t\t\tgenre\n\t\t\tauthor {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\tage\n\t\t\t\tbooks {\n\t\t\t\t\tname\n\t\t\t\t\tid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),I=Object(p.a)(o||(o=Object(k.a)(["\n\tmutation DeleteBook($id: ID!) {\n\t\tdeleteBook(id: $id) {\n\t\t\tid\n\t\t}\n\t}\n"]))),$=n(2);function S(t){var e=t.selectedBookID,n=Object(v.a)(y,{variables:{id:e}}),a=n.data;n.loading,n.error;return Object($.jsx)("div",{id:"book-details",children:function(){if(a&&a.book){var t=a.book;return console.log("This is book.author.books"),console.log(t.author.books),Object($.jsxs)("div",{children:[Object($.jsx)("h2",{children:t.name}),Object($.jsxs)("p",{children:["Genre: ",t.genre]}),Object($.jsxs)("p",{children:["Author: ",t.author.name]}),Object($.jsx)("p",{children:"All books by this author:"}),Object($.jsx)("ul",{className:"other-books",children:t.author.books.map((function(t){return Object($.jsx)("li",{children:t.name},t.id)}))})]})}return Object($.jsx)("div",{children:"No book selected..."})}()})}function D(){var t=Object(s.useState)(null),e=Object(x.a)(t,2),n=e[0],a=e[1],c=Object(m.a)(I),r=Object(x.a)(c,2),i=r[0],o=r[1],d=(o.data,o.loading,o.error,Object(v.a)(g)),j=d.data,l=d.loading;d.error;function b(){return(b=Object(h.a)(O.a.mark((function t(e,c){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPropagation(),t.next=3,i({variables:{id:c},refetchQueries:[{query:g},{query:y,variables:{id:n}}]});case 3:r=t.sent,r.data.deleteBook.id==n&&a(null);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object($.jsxs)("div",{children:[Object($.jsx)("ul",{id:"book-list",children:l?Object($.jsx)("div",{children:"Loading books..."}):j.books.map((function(t){return Object($.jsxs)("li",{onClick:function(e){return a(t.id)},children:[t.name,Object($.jsx)("button",{onClick:function(e){!function(t,e){b.apply(this,arguments)}(e,t.id)},children:"x"})]},t.id)}))}),Object($.jsx)(S,{selectedBookID:n})]})}function w(){var t=Object(s.useState)(""),e=Object(x.a)(t,2),n=e[0],a=e[1],c=Object(s.useState)(""),r=Object(x.a)(c,2),i=r[0],o=r[1],d=Object(s.useState)(""),j=Object(x.a)(d,2),l=j[0],b=j[1],u=Object(s.useState)(!1),O=Object(x.a)(u,2),h=O[0],k=O[1],p=Object(v.a)(f),y=p.data,I=p.loading,S=(p.error,Object(m.a)(B)),D=Object(x.a)(S,2),w=D[0],q=D[1];q.data,q.loading,q.error;return Object($.jsxs)("form",{id:"add-book",onSubmit:function(t){!function(t){t.preventDefault(),""!=n&&""!=i&&""!=l?(k(!1),w({variables:{name:n,genre:i,authorId:l},refetchQueries:[{query:g}]}),a(""),o(""),b("")):k(!0)}(t)},children:[h&&Object($.jsx)("div",{id:"incomplete",children:"Form is incomplete"}),Object($.jsxs)("div",{className:"field",children:[Object($.jsx)("label",{children:"Book name:"}),Object($.jsx)("input",{value:n,type:"text",onChange:function(t){return a(t.target.value)}})]}),Object($.jsxs)("div",{className:"field",children:[Object($.jsx)("label",{children:"Genre:"}),Object($.jsx)("input",{value:i,type:"text",onChange:function(t){return o(t.target.value)}})]}),Object($.jsxs)("div",{className:"field",children:[Object($.jsx)("label",{children:"Author:"}),Object($.jsxs)("select",{value:l,onChange:function(t){return b(t.target.value)},children:[Object($.jsx)("option",{value:"",children:"Select author"},""),I?Object($.jsx)("option",{disabled:!0,children:"Loading authors"}):y.authors.map((function(t){return Object($.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]}),Object($.jsx)("button",{children:"+"})]})}var q=function(){var t=new j.a,e=new l.a({cache:t,uri:"/graphql"});return Object($.jsx)(b.a,{client:e,children:Object($.jsxs)("div",{id:"main",children:[Object($.jsx)("h1",{children:"Love's Book List"}),Object($.jsx)(D,{}),Object($.jsx)(w,{})]})})};Object(d.render)(Object($.jsx)(q,{}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.c627682c.chunk.js.map