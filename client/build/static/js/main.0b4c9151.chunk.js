(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(t,e,n){},57:function(t,e,n){"use strict";n.r(e);var c,a,i,r,o,s=n(3),d=n(40),j=(n(53),n(67)),b=n(65),l=n(64),u=n(33),O=n.n(u),h=n(41),x=n(17),m=n(69),k=n(68),p=n(21),f=n(66),v=Object(f.a)(c||(c=Object(p.a)(["\n\t{\n\t\tauthors {\n\t\t\tname\n\t\t\tid\n\t\t}\n\t}\n"]))),g=Object(f.a)(a||(a=Object(p.a)(["\n\t{\n\t\tbooks {\n\t\t\tname\n\t\t\tid\n\t\t}\n\t}\n"]))),B=Object(f.a)(i||(i=Object(p.a)(["\n\tmutation AddBook($name: String!, $genre: String!, $authorId: ID!) {\n\t\taddBook(name: $name, genre: $genre, authorId: $authorId) {\n\t\t\tname\n\t\t\tid\n\t\t}\n\t}\n"]))),y=Object(f.a)(r||(r=Object(p.a)(["\n\tquery GetBook($id: ID) {\n\t\tbook(id: $id) {\n\t\t\tid\n\t\t\tname\n\t\t\tgenre\n\t\t\tauthor {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\tage\n\t\t\t\tbooks {\n\t\t\t\t\tname\n\t\t\t\t\tid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),I=Object(f.a)(o||(o=Object(p.a)(["\n\tmutation DeleteBook($id: ID!) {\n\t\tdeleteBook(id: $id) {\n\t\t\tid\n\t\t}\n\t}\n"]))),$=n(2);function S(t){var e=t.selectedBookID,n=Object(k.a)(y,{variables:{id:e}}),c=n.data;n.loading,n.error;return Object($.jsx)("div",{id:"book-details",children:function(){if(c&&c.book){var t=c.book;return console.log("This is book.author.books"),console.log(t.author.books),Object($.jsxs)("div",{children:[Object($.jsx)("h2",{children:t.name}),Object($.jsx)("p",{children:t.genre}),Object($.jsx)("p",{children:t.author.name}),Object($.jsx)("p",{children:"All books by this author:"}),Object($.jsx)("ul",{className:"other-books",children:t.author.books.map((function(t){return Object($.jsx)("li",{children:t.name},t.id)}))})]})}return Object($.jsx)("div",{children:"No book selected..."})}()})}function D(){var t=Object(s.useState)(null),e=Object(x.a)(t,2),n=e[0],c=e[1],a=Object(m.a)(I),i=Object(x.a)(a,2),r=i[0],o=i[1],d=(o.data,o.loading,o.error,Object(k.a)(g)),j=d.data,b=d.loading;d.error;function l(){return(l=Object(h.a)(O.a.mark((function t(e,a){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPropagation(),t.next=3,r({variables:{id:a},refetchQueries:[{query:g},{query:y,variables:{id:n}}]});case 3:i=t.sent,i.data.deleteBook.id==n&&c(null);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object($.jsxs)("div",{children:[Object($.jsx)("ul",{id:"book-list",children:b?Object($.jsx)("div",{children:"Loading books..."}):j.books.map((function(t){return Object($.jsxs)("li",{onClick:function(e){return c(t.id)},children:[t.name,Object($.jsx)("button",{onClick:function(e){!function(t,e){l.apply(this,arguments)}(e,t.id)},children:"x"})]},t.id)}))}),Object($.jsx)(S,{selectedBookID:n})]})}function w(){var t=Object(s.useState)(""),e=Object(x.a)(t,2),n=e[0],c=e[1],a=Object(s.useState)(""),i=Object(x.a)(a,2),r=i[0],o=i[1],d=Object(s.useState)(""),j=Object(x.a)(d,2),b=j[0],l=j[1],u=Object(s.useState)(!1),O=Object(x.a)(u,2),h=O[0],p=O[1],f=Object(k.a)(v),y=f.data,I=f.loading,S=(f.error,Object(m.a)(B)),D=Object(x.a)(S,2),w=D[0],q=D[1];q.data,q.loading,q.error;return Object($.jsxs)("form",{id:"add-book",onSubmit:function(t){!function(t){t.preventDefault(),""!=n&&""!=r&&""!=b?(p(!1),w({variables:{name:n,genre:r,authorId:b},refetchQueries:[{query:g}]})):p(!0)}(t)},children:[h&&Object($.jsx)("div",{id:"incomplete",children:"Form is incomplete"}),Object($.jsxs)("div",{className:"field",children:[Object($.jsx)("label",{children:"Book name:"}),Object($.jsx)("input",{type:"text",onChange:function(t){return c(t.target.value)}})]}),Object($.jsxs)("div",{className:"field",children:[Object($.jsx)("label",{children:"Genre:"}),Object($.jsx)("input",{type:"text",onChange:function(t){return o(t.target.value)}})]}),Object($.jsxs)("div",{className:"field",children:[Object($.jsx)("label",{children:"Author:"}),Object($.jsxs)("select",{onChange:function(t){return l(t.target.value)},children:[Object($.jsx)("option",{value:"",children:"Select author"},""),I?Object($.jsx)("option",{disabled:!0,children:"Loading authors"}):y.authors.map((function(t){return Object($.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]}),Object($.jsx)("button",{children:"+"})]})}var q=function(){var t=new j.a,e=new b.a({cache:t,uri:"/graphql"});return Object($.jsx)(l.a,{client:e,children:Object($.jsxs)("div",{id:"main",children:[Object($.jsx)("h1",{children:"Love's Book List"}),Object($.jsx)(D,{}),Object($.jsx)(w,{})]})})};Object(d.render)(Object($.jsx)(q,{}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.0b4c9151.chunk.js.map